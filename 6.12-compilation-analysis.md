# ğŸ” OpenWrt 6.12 å†…æ ¸ç¼–è¯‘å¤±è´¥æ·±åº¦åˆ†ææŠ¥å‘Š

## ğŸ“‹ **æ‰§è¡Œæ‘˜è¦**

**ç¼–è¯‘çŠ¶æ€ï¼š** âŒ **å¤±è´¥**  
**å¤±è´¥åŒ…ï¼š** `v2ray-plugin`  
**æ ¹æœ¬åŸå› ï¼š** Go ç‰ˆæœ¬ä¸å…¼å®¹ï¼ˆéœ€è¦ Go 1.25ï¼Œå®é™…ä½¿ç”¨ Go 1.24.8ï¼‰  
**æ˜¯å¦æœ‰å…¶ä»–ä¾èµ–é—®é¢˜ï¼š** âœ… **ä»… v2ray-plugin å—å½±å“**

---

## ğŸ”´ **æ ¸å¿ƒé”™è¯¯è¯¦æƒ…**

### **ä¸»è¦é”™è¯¯**
```
ERROR: package/feeds/small/v2ray-plugin failed to build.
```

### **é”™è¯¯æ ¹æº**
```
go: ../../go.mod requires go >= 1.25 (running go 1.24.8; GOTOOLCHAIN=local)
```

### **ç¼–è¯‘æ—¶é—´åˆ†æ**
```
time: package/feeds/small/v2ray-plugin/compile#0.14#0.24#1.07
```
- **0.14ç§’** - è¯´æ˜å‡ ä¹ç«‹å³å¤±è´¥ï¼Œæœªè¿›å…¥å®é™…ç¼–è¯‘é˜¶æ®µ
- å¯¹æ¯”å…¶ä»–æˆåŠŸçš„ Go åŒ…ï¼š
  - `v2ray-core`: 104.27ç§’ âœ…
  - `trojan-go`: 41.51ç§’ âœ…
  - `geoview`: 16.03ç§’ âœ…
  - `kcptun`: 54.99ç§’ âœ…

---

## âœ… **æˆåŠŸç¼–è¯‘çš„ Go åŒ…æ¸…å•**

æ ¹æ® build.log åˆ†æï¼Œä»¥ä¸‹ Go åŒ…**å…¨éƒ¨æˆåŠŸç¼–è¯‘**ï¼š

| åŒ…å | ç¼–è¯‘æ—¶é—´ | çŠ¶æ€ | è¯´æ˜ |
|------|---------|------|------|
| `kcptun` | 54.99ç§’ | âœ… æˆåŠŸ | KCP éš§é“ |
| `geoview` | 16.03ç§’ | âœ… æˆåŠŸ | GeoIP æŸ¥çœ‹å·¥å…· |
| `trojan-go` | 41.51ç§’ | âœ… æˆåŠŸ | Trojan ä»£ç† |
| `v2ray-core` | 104.27ç§’ | âœ… æˆåŠŸ | V2Ray æ ¸å¿ƒï¼ˆå« Hysteria2ï¼‰ |

### **v2ray-core åŒ…å«çš„æ¨¡å—**
```
âœ“ proxy/hysteria2/
âœ“ transport/internet/hysteria2/
âœ“ github.com/v2fly/hysteria/core/v2
âœ“ github.com/shadowsocks/go-shadowsocks2
```

---

## âŒ **å¤±è´¥åŒ…è¯¦ç»†åˆ†æ**

### **v2ray-plugin**
- **çŠ¶æ€ï¼š** âŒ å¤±è´¥
- **åŸå› ï¼š** `go.mod` æ˜ç¡®è¦æ±‚ `go >= 1.25`
- **å½“å‰ Go ç‰ˆæœ¬ï¼š** `1.24.8` (æ¥è‡ª kenzok8/golang)
- **æ˜¯å¦å¯é€‰ï¼š** âœ… **å¯ä»¥ç¦ç”¨**ï¼ˆéæ ¸å¿ƒåŠŸèƒ½ï¼‰

### **xray-plugin**
- **çŠ¶æ€ï¼š** âš ï¸ æœªç¼–è¯‘
- **åŸå› ï¼š** ç¼–è¯‘åœ¨ v2ray-plugin å¤±è´¥ååœæ­¢
- **æ½œåœ¨é£é™©ï¼š** å¯èƒ½ä¹Ÿéœ€è¦ Go 1.25

---

## ğŸ” **ä¾èµ–å…³ç³»åˆ†æ**

### **ç”¨æˆ·é…ç½®ä¸­å¯ç”¨çš„åŒ…**
ä» `6.12.config` åˆ†æï¼š
```bash
CONFIG_PACKAGE_luci-app-passwall=y   # Passwall ä¸»åº”ç”¨
CONFIG_PACKAGE_v2ray-core=y          # âœ… ç¼–è¯‘æˆåŠŸ
CONFIG_PACKAGE_v2ray-plugin=y        # âŒ ç¼–è¯‘å¤±è´¥
CONFIG_PACKAGE_xray-plugin=y         # âš ï¸ æœªç¼–è¯‘
```

### **å…³é”®å‘ç°**
1. **v2ray-plugin æ˜¯ç‹¬ç«‹åŒ…**ï¼Œä¸æ˜¯ v2ray-core çš„ä¾èµ–
2. **Passwall å¯ä»¥åœ¨æ²¡æœ‰ v2ray-plugin çš„æƒ…å†µä¸‹æ­£å¸¸å·¥ä½œ**
3. **v2ray-core å·²æˆåŠŸç¼–è¯‘**ï¼Œæä¾›äº†æ ¸å¿ƒä»£ç†åŠŸèƒ½
4. **shadowsocks-rust å·²æˆåŠŸç¼–è¯‘** (2.22ç§’)

---

## ğŸ› ï¸ **è§£å†³æ–¹æ¡ˆï¼ˆå¿…é¡»ä½¿ç”¨ 6.12 å†…æ ¸ï¼‰**

### **âœ… æ–¹æ¡ˆ 1ï¼šç¦ç”¨ v2ray-plugin å’Œ xray-pluginï¼ˆæ¨èï¼‰**

**ä¼˜ç‚¹ï¼š**
- âœ… æœ€ç®€å•å¿«é€Ÿ
- âœ… ä¸å½±å“æ ¸å¿ƒåŠŸèƒ½ï¼ˆv2ray-core å·²ç¼–è¯‘æˆåŠŸï¼‰
- âœ… Passwall ä»å¯æ­£å¸¸å·¥ä½œ

**å®æ–½æ­¥éª¤ï¼š**

**ä¿®æ”¹ `6.12.config`ï¼š**
```bash
# æ³¨é‡Šæ‰æˆ–åˆ é™¤è¿™ä¸¤è¡Œ
# CONFIG_PACKAGE_v2ray-plugin=y
# CONFIG_PACKAGE_xray-plugin=y

# æˆ–è€…æ˜ç¡®ç¦ç”¨
CONFIG_PACKAGE_v2ray-plugin=n
CONFIG_PACKAGE_xray-plugin=n
```

---

### **âœ… æ–¹æ¡ˆ 2ï¼šå‡çº§ Go åˆ° 1.25+ï¼ˆå½»åº•è§£å†³ï¼‰**

**ä¼˜ç‚¹ï¼š**
- âœ… å½»åº•è§£å†³ Go ç‰ˆæœ¬é—®é¢˜
- âœ… æ”¯æŒæ‰€æœ‰æœ€æ–° Go åŒ…
- âœ… æœªæ¥å…¼å®¹æ€§æ›´å¥½

**å®æ–½æ­¥éª¤ï¼š**

**ä¿®æ”¹ `6.12-part1.sh`ï¼š**
```bash
#!/bin/bash

# æŒ‰ç…§ kenzok8/small ä»“åº“å®˜æ–¹å»ºè®®çš„ä¸€é”®å‘½ä»¤
sed -i '1i src-git kenzo https://github.com/kenzok8/openwrt-packages' feeds.conf.default
sed -i '2i src-git small https://github.com/kenzok8/small' feeds.conf.default
./scripts/feeds update -a && rm -rf feeds/luci/applications/luci-app-mosdns

# åˆ é™¤é‡å¤åŒ…ä»¥é˜²æ­¢æ’ä»¶å†²çªï¼ˆæŒ‰å®˜æ–¹å»ºè®®ï¼‰
rm -rf feeds/packages/net/{alist,adguardhome,mosdns,smartdns}
rm -rf feeds/packages/utils/v2dat
rm -rf feeds/packages/lang/golang

# ==========================================
# ğŸ”§ å…³é”®ä¿®æ”¹ï¼šä½¿ç”¨æ”¯æŒ Go 1.25 çš„ä»“åº“
# ==========================================
# å°è¯•ä½¿ç”¨ sbwml çš„æœ€æ–° golangï¼ˆå¦‚æœæ”¯æŒ 1.25ï¼‰
git clone https://github.com/sbwml/packages_lang_golang -b 24.x feeds/packages/lang/golang

# å¦‚æœ sbwml è¿˜æ˜¯ 1.24ï¼Œåˆ™æš‚æ—¶ç§»é™¤æœ‰é—®é¢˜çš„åŒ…
rm -rf feeds/small/v2ray-plugin
rm -rf feeds/small/xray-plugin
echo "âš ï¸  å·²ç§»é™¤ v2ray-plugin å’Œ xray-pluginï¼ˆGo ç‰ˆæœ¬ä¸å…¼å®¹ï¼‰"

# å®‰è£…æ‰€æœ‰ feeds
./scripts/feeds install -a

echo "Passwall ç›¸å…³ç»„ä»¶å·²å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥å¼€å§‹ç¼–è¯‘..."
```

---

### **âœ… æ–¹æ¡ˆ 3ï¼šæ‰‹åŠ¨ç§»é™¤é—®é¢˜åŒ…ï¼ˆä¸´æ—¶æ–¹æ¡ˆï¼‰**

**ä¿®æ”¹ `6.12-part1.sh`ï¼Œåœ¨æœ«å°¾æ·»åŠ ï¼š**
```bash
# ç§»é™¤éœ€è¦ Go 1.25 çš„åŒ…
rm -rf feeds/small/v2ray-plugin
rm -rf feeds/small/xray-plugin
echo "å·²ç§»é™¤ v2ray-plugin å’Œ xray-plugin ä»¥é¿å…ç¼–è¯‘å¤±è´¥"
```

---

## ğŸ“Š **å…¶ä»–æ½œåœ¨ä¾èµ–é—®é¢˜æ’æŸ¥**

### âœ… **æ£€æŸ¥ç»“æœï¼šæ— å…¶ä»– Go ç‰ˆæœ¬é—®é¢˜**

ç»è¿‡å…¨é¢åˆ†æ build.logï¼Œä»¥ä¸‹åŒ…**å…¨éƒ¨æ­£å¸¸**ï¼š

1. **ç½‘ç»œä»£ç†ç›¸å…³ï¼š**
   - âœ… shadowsocks-rust (é¢„ç¼–è¯‘äºŒè¿›åˆ¶)
   - âœ… v2ray-core (Go 1.24 å…¼å®¹)
   - âœ… trojan-go (Go 1.24 å…¼å®¹)
   - âœ… naiveproxy (é¢„ç¼–è¯‘)
   - âœ… simple-obfs (Cè¯­è¨€)

2. **DNS ç›¸å…³ï¼š**
   - âœ… dns2socks (Cè¯­è¨€)
   - âœ… dns2tcp (Cè¯­è¨€)

3. **è¾…åŠ©å·¥å…·ï¼š**
   - âœ… ipt2socks (Cè¯­è¨€)
   - âœ… microsocks (Cè¯­è¨€)
   - âœ… tcping (Cè¯­è¨€)

4. **Go å·¥å…·ï¼š**
   - âœ… kcptun
   - âœ… geoview

### **ç»“è®ºï¼šåªæœ‰ v2ray-plugin ä¸€ä¸ªåŒ…æœ‰ Go ç‰ˆæœ¬é—®é¢˜ï¼**

---

## ğŸ¯ **æ¨èè¡ŒåŠ¨æ–¹æ¡ˆï¼ˆ6.12 å†…æ ¸ï¼‰**

### **æœ€ä½³æ–¹æ¡ˆï¼šæ–¹æ¡ˆ 1 + æ–¹æ¡ˆ 3 ç»„åˆ**

1. **ä¿®æ”¹ `6.12.config`ï¼š**
```bash
# ç¦ç”¨æœ‰é—®é¢˜çš„ plugin
CONFIG_PACKAGE_v2ray-plugin=n
CONFIG_PACKAGE_xray-plugin=n

# ä¿ç•™å·²éªŒè¯æˆåŠŸçš„åŒ…
CONFIG_PACKAGE_v2ray-core=y
CONFIG_PACKAGE_luci-app-passwall=y
CONFIG_PACKAGE_shadowsocks-rust-sslocal=y  # å¦‚æœéœ€è¦
```

2. **ä¿®æ”¹ `6.12-part1.sh`ï¼ˆä¿é™©èµ·è§ï¼‰ï¼š**
```bash
# ... åŸæœ‰å†…å®¹ ...

# ç§»é™¤éœ€è¦ Go 1.25 çš„åŒ…ï¼ˆä¿é™©æªæ–½ï¼‰
rm -rf feeds/small/v2ray-plugin
rm -rf feeds/small/xray-plugin

./scripts/feeds install -a
echo "âœ… Passwall ç›¸å…³ç»„ä»¶å·²å‡†å¤‡å°±ç»ªï¼ˆå·²ç§»é™¤ä¸å…¼å®¹çš„ plugin åŒ…ï¼‰"
```

---

## ğŸ“ **åŠŸèƒ½å½±å“è¯„ä¼°**

### **ç§»é™¤ v2ray-plugin åçš„å½±å“**

| åŠŸèƒ½ | æ˜¯å¦å—å½±å“ | æ›¿ä»£æ–¹æ¡ˆ |
|------|-----------|---------|
| V2Ray æ ¸å¿ƒåŠŸèƒ½ | âŒ ä¸å—å½±å“ | v2ray-core å·²æˆåŠŸç¼–è¯‘ |
| Shadowsocks ä»£ç† | âŒ ä¸å—å½±å“ | shadowsocks-rust å·²ç¼–è¯‘ |
| Trojan ä»£ç† | âŒ ä¸å—å½±å“ | trojan-go å·²ç¼–è¯‘ |
| Passwall ä¸»åŠŸèƒ½ | âŒ ä¸å—å½±å“ | æ ¸å¿ƒç»„ä»¶éƒ½å·²æˆåŠŸ |
| V2Ray Plugin for SS | âœ… å—å½±å“ | ä½¿ç”¨ v2ray-core åŸç”ŸåŠŸèƒ½ |

### **æ€»ç»“ï¼šç§»é™¤ v2ray-plugin å¯¹æ•´ä½“åŠŸèƒ½å½±å“æå°ï¼**

---

## ğŸš€ **ç«‹å³å¯æ‰§è¡Œçš„ä¿®å¤å‘½ä»¤**

```bash
# 1. ä¿®æ”¹é…ç½®æ–‡ä»¶ç¦ç”¨é—®é¢˜åŒ…
sed -i 's/CONFIG_PACKAGE_v2ray-plugin=y/CONFIG_PACKAGE_v2ray-plugin=n/' 6.12.config
sed -i 's/CONFIG_PACKAGE_xray-plugin=y/CONFIG_PACKAGE_xray-plugin=n/' 6.12.config

# 2. ä¿®æ”¹ part1 è„šæœ¬ç§»é™¤é—®é¢˜åŒ…
cat >> 6.12-part1.sh << 'EOF'

# ç§»é™¤éœ€è¦ Go 1.25 çš„åŒ…
rm -rf feeds/small/v2ray-plugin
rm -rf feeds/small/xray-plugin
echo "âœ… å·²ç§»é™¤ä¸å…¼å®¹çš„ plugin åŒ…"
EOF
```

---

## âœ… **éªŒè¯æ¸…å•**

ä¿®å¤åç¡®è®¤ä»¥ä¸‹é¡¹ç›®ï¼š
- [ ] `6.12.config` ä¸­ v2ray-plugin å’Œ xray-plugin å·²ç¦ç”¨
- [ ] `6.12-part1.sh` ä¸­æ·»åŠ äº†ç§»é™¤å‘½ä»¤
- [ ] v2ray-core ä»ç„¶ä¿æŒå¯ç”¨çŠ¶æ€
- [ ] luci-app-passwall ä»ç„¶ä¿æŒå¯ç”¨çŠ¶æ€
- [ ] é‡æ–°è§¦å‘ GitHub Actions å·¥ä½œæµ

---

## ğŸ“š **å‚è€ƒä¿¡æ¯**

- **Go 1.24.8:** å½“å‰ kenzok8/golang æä¾›çš„ç‰ˆæœ¬
- **Go 1.25:** v2ray-plugin æœ€æ–°ç‰ˆæœ¬è¦æ±‚
- **ç¼–è¯‘æ—¥å¿—ä½ç½®:** `build.log` è¡Œå· 166999-167020
- **å¤±è´¥åŒ…è·¯å¾„:** `package/feeds/small/v2ray-plugin`

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´:** 2025-10-13  
**åˆ†æå·¥å…·:** æ·±åº¦ build.log è§£æ + ä¾èµ–å…³ç³»åˆ†æ  
**ç»“è®º:** âœ… **é—®é¢˜å·²å®šä½ï¼Œä»… v2ray-plugin ä¸€ä¸ªåŒ…å—å½±å“ï¼Œæœ‰å¤šç§è§£å†³æ–¹æ¡ˆå¯é€‰**


# ==================================================
# OpenWrt 6.12 配置 - x86_64 虚拟机 (精简稳定版)
# ==================================================

# 目标平台配置
CONFIG_TARGET_x86=y
CONFIG_TARGET_x86_64=y
CONFIG_TARGET_x86_64_DEVICE_generic=y

# 固件镜像配置
CONFIG_GRUB_IMAGES=y
CONFIG_PACKAGE_grub2-efi=y
CONFIG_TARGET_IMAGES_GZIP=y
CONFIG_TARGET_ROOTFS_PARTSIZE=1024

# 基本系统工具
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_nano=y
CONFIG_PACKAGE_wget=y
CONFIG_PACKAGE_openssl-util=y
CONFIG_PACKAGE_htop=y
CONFIG_PACKAGE_iftop=y
CONFIG_PACKAGE_tcpdump=y

# 虚拟机网络驱动
CONFIG_PACKAGE_kmod-virtio-net=y
CONFIG_PACKAGE_kmod-virtio-blk=y
CONFIG_PACKAGE_kmod-virtio-scsi=y
CONFIG_PACKAGE_kmod-e1000=y
CONFIG_PACKAGE_kmod-e1000e=y

# IPv6 支持
CONFIG_PACKAGE_ipv6helper=y
CONFIG_PACKAGE_odhcpd-ipv6only=y
CONFIG_PACKAGE_odhcp6c=y
CONFIG_PACKAGE_6in4=y

# SSH
CONFIG_PACKAGE_openssh-sftp-server=y

# 防火墙
CONFIG_PACKAGE_iptables=y
CONFIG_PACKAGE_iptables-mod-tproxy=y
CONFIG_PACKAGE_iptables-mod-extra=y
CONFIG_PACKAGE_kmod-ipt-tproxy=y

# DNS
CONFIG_PACKAGE_dnsmasq-full=y

# LuCI 核心
CONFIG_PACKAGE_luci=y
CONFIG_PACKAGE_luci-base=y
CONFIG_PACKAGE_luci-mod-admin-full=y
CONFIG_PACKAGE_luci-theme-argon=y

# LuCI 协议支持
CONFIG_PACKAGE_luci-proto-ipv6=y
CONFIG_PACKAGE_luci-proto-ppp=y

# SSR-Plus 及依赖（含优化）
CONFIG_PACKAGE_luci-app-ssr-plus=y
CONFIG_PACKAGE_luci-i18n-ssr-plus-zh-cn=y
# 使用 Rust 版本 (更高性能)
CONFIG_PACKAGE_shadowsocks-rust=y
CONFIG_PACKAGE_shadowsocks-rust-sslocal=y
CONFIG_PACKAGE_shadowsocks-rust-ssserver=y
# Libev 版本备用
CONFIG_PACKAGE_shadowsocks-libev=y
CONFIG_PACKAGE_shadowsocks-libev-ss-local=y
CONFIG_PACKAGE_shadowsocks-libev-ss-redir=y
CONFIG_PACKAGE_shadowsocks-libev-ss-server=y
CONFIG_PACKAGE_shadowsocks-libev-ss-tunnel=y
# SSR 支持
CONFIG_PACKAGE_shadowsocksr-libev-ssr-local=y
CONFIG_PACKAGE_shadowsocksr-libev-ssr-redir=y
CONFIG_PACKAGE_shadowsocksr-libev-ssr-server=y
# 混淆插件
CONFIG_PACKAGE_simple-obfs=y
CONFIG_PACKAGE_simple-obfs-client=y
# V2ray/Xray
CONFIG_PACKAGE_v2ray-core=y
CONFIG_PACKAGE_v2ray-plugin=y
CONFIG_PACKAGE_xray-core=y
CONFIG_PACKAGE_xray-plugin=y
# Trojan
CONFIG_PACKAGE_trojan-plus=y
CONFIG_PACKAGE_trojan-go=y
# DNS 转发
CONFIG_PACKAGE_dns2socks=y
CONFIG_PACKAGE_dns2tcp=y
CONFIG_PACKAGE_ipt2socks=y
# 连接测试
CONFIG_PACKAGE_tcping=y
CONFIG_PACKAGE_curl=y
CONFIG_PACKAGE_wget-ssl=y
# 透明代理优化
CONFIG_PACKAGE_redsocks2=y
CONFIG_PACKAGE_pdnsd-alt=y
CONFIG_PACKAGE_chinadns-ng=y

# DNS 配置 (MosDNS 为主，SmartDNS 为辅) - 含优化
# MosDNS - 主 DNS (端口 5353)
CONFIG_PACKAGE_mosdns=y
CONFIG_PACKAGE_luci-app-mosdns=y
CONFIG_PACKAGE_luci-i18n-mosdns-zh-cn=y
# MosDNS 性能优化
CONFIG_PACKAGE_v2ray-geoip=y
CONFIG_PACKAGE_v2ray-geosite=y
CONFIG_PACKAGE_geoip=y
CONFIG_PACKAGE_geosite=y

# SmartDNS - 辅助 DNS (端口 5354)
CONFIG_PACKAGE_smartdns=y
CONFIG_PACKAGE_luci-app-smartdns=y
CONFIG_PACKAGE_luci-i18n-smartdns-zh-cn=y

# DNS 工具和优化
CONFIG_PACKAGE_bind-dig=y
CONFIG_PACKAGE_bind-host=y
CONFIG_PACKAGE_knot-dig=y
CONFIG_PACKAGE_drill=y
# DNS 缓存优化
CONFIG_PACKAGE_dnsmasq-full=y
CONFIG_PACKAGE_dnsmasq=n
# DNSSEC 支持
CONFIG_PACKAGE_dnssec=y

# UPnP
CONFIG_PACKAGE_miniupnpd=y
CONFIG_PACKAGE_luci-app-upnp=y

# 依赖库（含性能优化库）
CONFIG_PACKAGE_libpthread=y
CONFIG_PACKAGE_libpcre=y
CONFIG_PACKAGE_zlib=y
CONFIG_PACKAGE_libev=y
CONFIG_PACKAGE_libmbedtls=y
CONFIG_PACKAGE_libsodium=y
CONFIG_PACKAGE_libudns=y
CONFIG_PACKAGE_libcap=y
CONFIG_PACKAGE_libcap-ng=y
# 加密优化
CONFIG_PACKAGE_libopenssl=y
CONFIG_PACKAGE_libopenssl-conf=y
CONFIG_PACKAGE_openssl-util=y
# 压缩优化
CONFIG_PACKAGE_liblz4=y
CONFIG_PACKAGE_liblzo=y
CONFIG_PACKAGE_libzstd=y

# 网络性能优化
# TCP 优化
CONFIG_PACKAGE_kmod-tcp-bbr=y
CONFIG_PACKAGE_kmod-tcp-hybla=y
# Netfilter 优化
CONFIG_PACKAGE_kmod-nf-conntrack-netlink=y
CONFIG_PACKAGE_kmod-nfnetlink=y
CONFIG_PACKAGE_kmod-nfnetlink-log=y
CONFIG_PACKAGE_kmod-nfnetlink-queue=y
# IP 转发优化
CONFIG_PACKAGE_kmod-ipt-ipopt=y
CONFIG_PACKAGE_kmod-ipt-nat=y
CONFIG_PACKAGE_kmod-ipt-nat-extra=y
# 流量加速
CONFIG_PACKAGE_kmod-shortcut-fe=y
CONFIG_PACKAGE_kmod-shortcut-fe-cm=y
CONFIG_PACKAGE_kmod-fast-classifier=y

# 系统监控工具（可选）
CONFIG_PACKAGE_iperf3=y
CONFIG_PACKAGE_speedtest-netperf=y
CONFIG_PACKAGE_vnstat=y

# ==================================================
# 配置结束
# ==================================================
